<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="arraysort.project.board.app.post.mapper.PostMapper">

    <!-- 게시글 추가 -->
    <insert id="insertPost" parameterType="arraysort.project.board.app.post.domain.PostVO">
        insert into post(user_id,
                         title,
                         content,
                         category,
                         type)
        values (#{userId},
                #{title},
                #{content},
                #{category},
                #{type});
    </insert>

    <!-- 게시글 리스트 조회 -->
    <select id="selectPostList" parameterType="arraysort.project.board.app.post.domain.PostListDTO"
            resultType="arraysort.project.board.app.post.domain.PostVO">
        select p.post_id,
               p.user_id,
               u.user_name,
               p.title,
               p.content,
               p.created_at,
               p.updated_at,
               p.category,
               p.type,
               p.views
        from post p
        inner join user u on p.user_id = u.user_id
    </select>

    <!-- 게시글 세부내용 조회 -->
    <select id="selectPostDetailByPostId" parameterType="long" resultType="arraysort.project.board.app.post.domain.PostVO">
        select p.post_id,
               p.user_id,
               u.user_name,
               p.title,
               p.content,
               p.created_at,
               p.updated_at,
               p.category,
               p.type,
               p.views
        from post p
        inner join user u on p.user_id = u.user_id
        where post_id = #{postId}
    </select>

</mapper>
